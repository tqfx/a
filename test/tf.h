#ifndef TEST_TF_H
#define TEST_TF_H
#define MAIN_(s, argc, argv) A_CASE_2(tf, s)(argc, argv)
#include "test.h"
#include "a/tf.h"

static a_float_t u[] = {2000, -652.99418, -344.66975, -168.84826, -133.5101, -109.5296, -86.454203, -67.783481, -53.22429, -41.808457, -32.835939, -25.786913, -20.2509, -15.903432, -12.489385, -9.8083792, -7.703033, -6.0497455, -4.7514505, -3.731923, -2.9313047, -2.3025903, -1.8088678, -1.4211508, -1.1166775, -0.87757332, -0.68980192, -0.54234094, -0.42653479, -0.33558647, -0.26415848, -0.2080594, -0.16399783, -0.12938911, -0.10220358, -0.080847398, -0.064068962, -0.050885415, -0.040524947, -0.032381475, -0.025979056, -0.020943941, -0.016982637, -0.013864667, -0.011409044, -0.0094736412, -0.00794685, -0.0067410251, -0.0057873396, -0.0050317445, -0.0044317954, -0.0039541603, -0.0035726634, -0.0032667484, -0.0030202717, -0.002820555, -0.0026576412, -0.0025237103, -0.00241262, -0.0023195462, -0.0022406992, -0.0021731023, -0.0021144168, -0.002062805, -0.0020168229, -0.0019753356, -0.0019374509, -0.0019024669, -0.0018698319, -0.0018391113, -0.0018099631, -0.0017821178, -0.0017553627, -0.00172953, -0.001704487, -0.0016801285, -0.0016563712, -0.0016331487, -0.0016104081, -0.0015881069, -0.0015662109, -0.0015446926, -0.0015235294, -0.0015027029, -0.0014821978, -0.0014620014, -0.0014421028, -0.0014224928, -0.0014031634, -0.0013841076, -0.0013653192, -0.0013467927, -0.0013285228, -0.001310505, -0.0012927348, -0.0012752081, -0.001257921, -0.0012408699, -0.0012240512, -0.0012074614, -0.0011910972, -0.0011749554, -0.0011590329, -0.0011433264, -0.0011278332, -0.0011125501, -0.0010974742, -0.0010826028, -0.0010679331, -0.0010534622, -0.0010391874, -0.0010251061, -0.0010112157, -0.00099751355, -0.00098399708, -0.00097066377, -0.00095751115, -0.00094453677, -0.00093173819, -0.00091911305, -0.00090665898, -0.00089437368, -0.00088225484, -0.00087030022, -0.00085850759, -0.00084687475, -0.00083539953, -0.00082407981, -0.00081291347, -0.00080189844, -0.00079103266, -0.00078031412, -0.00076974081, -0.00075931077, -0.00074902206, -0.00073887276, -0.00072886099, -0.00071898487, -0.00070924258, -0.0006996323, -0.00069015223, -0.00068080063, -0.00067157573, -0.00066247584, -0.00065349925, -0.00064464429, -0.00063590932, -0.00062729271, -0.00061879285, -0.00061040817, -0.0006021371, -0.0005939781, -0.00058592966, -0.00057799027, -0.00057015847, -0.00056243278, -0.00055481178, -0.00054729405, -0.00053987818, -0.00053256279, -0.00052534653, -0.00051822805, -0.00051120603, -0.00050427915, -0.00049744614, -0.00049070571, -0.00048405662, -0.00047749762, -0.0004710275, -0.00046464504, -0.00045834907, -0.00045213841, -0.00044601191, -0.00043996842, -0.00043400682, -0.000428126, -0.00042232486, -0.00041660233, -0.00041095734, -0.00040538884, -0.0003998958, -0.00039447719, -0.00038913199, -0.00038385923, -0.00037865791, -0.00037352707, -0.00036846576, -0.00036347302, -0.00035854794, -0.00035368959, -0.00034889708, -0.0003441695, -0.00033950598, -0.00033490565, -0.00033036766, -0.00032589115, -0.00032147531, -0.0003171193, -0.00031282231, -0.00030858355};

int MAIN(int argc, char *argv[]) // NOLINT(misc-definitions-in-headers)
{
#if defined(MAIN_ONCE)
    FILE *log = A_NULL;
    if (argc > 1)
    {
        log = freopen(argv[1], "wb", stdout);
    }
#else /* !MAIN_ONCE */
    (void)(argc);
    (void)(argv);
#endif /* MAIN_ONCE */

    a_float_t num[] = {A_FLOAT_C(6.59492796e-05), A_FLOAT_C(6.54019884e-05)};
    a_float_t den[] = {A_FLOAT_C(-1.97530991), A_FLOAT_C(0.97530991)};

    a_tf_s tf;
    a_float_t input[a_count_of(num)];
    a_float_t output[a_count_of(den)];
    a_tf_init(&tf, a_count_of(num), num, input, a_count_of(den), den, output);

    a_uint_t i = 0;
    for (a_float_t t = 0; t < A_FLOAT_C(0.2); t += A_FLOAT_C(0.001))
    {
        a_float_t out = a_tf_iter(&tf, u[i++]);
#if defined(MAIN_ONCE)
        printf(A_FLOAT_PRI("+", "f ") A_FLOAT_PRI("+", "f ") A_FLOAT_PRI("+", "f\n"), t, A_FLOAT_C(1.0), out);
#else /* !MAIN_ONCE */
        (void)out;
#endif /* MAIN_ONCE */
    }

#if defined(MAIN_ONCE)
    if (log)
    {
        if (fclose(log))
        {
            perror(A_FUNC);
        }
    }
#endif /* MAIN_ONCE */

    return 0;
}

#endif /* tf.h */
